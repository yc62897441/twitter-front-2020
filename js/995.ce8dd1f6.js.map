{"version":3,"file":"js/995.ce8dd1f6.js","mappings":"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","sources":["webpack://twitter-front-2020/./src/components/ModalNewTweet.vue","webpack://twitter-front-2020/src/components/ModalNewTweet.vue","webpack://twitter-front-2020/./src/components/ModalNewTweet.vue?743a","webpack://twitter-front-2020/./src/components/ModalNewTweet.vue?df9d","webpack://twitter-front-2020/./src/components/ModalTweetReply.vue","webpack://twitter-front-2020/src/components/ModalTweetReply.vue","webpack://twitter-front-2020/./src/components/ModalTweetReply.vue?3ce1","webpack://twitter-front-2020/./src/components/ModalTweetReply.vue?6b44"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"modal fade\",attrs:{\"id\":'modalNewTweet',\"tabindex\":\"-1\",\"aria-labelledby\":\"exampleModalLabel\",\"aria-hidden\":\"true\"}},[_c('div',{staticClass:\"modal-dialog\"},[_c('div',{staticClass:\"modal-content\"},[_vm._m(0),_c('div',{staticClass:\"modal-body\"},[_c('div',{staticClass:\"modal-new-tweet-wrapper\"},[_c('div',{staticClass:\"modal-new-tweet-wrapper-left\"},[_c('router-link',{staticClass:\"link\",attrs:{\"to\":'/users/' + _vm.currentUser.id}},[_c('img',{attrs:{\"src\":_vm.currentUser.avatar,\"alt\":\"\",\"type\":\"button\",\"data-bs-dismiss\":\"modal\",\"aria-label\":\"Close\"}})])],1),_c('form',{staticClass:\"modal-new-tweet-wrapper-right\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newTweetDescription),expression:\"newTweetDescription\"}],attrs:{\"cols\":\"30\",\"rows\":\"5\",\"maxlength\":\"140\",\"placeholder\":\"有什麼新鮮事？\",\"name\":\"newTweetDescription\",\"required\":\"\"},domProps:{\"value\":(_vm.newTweetDescription)},on:{\"keyup\":_vm.words_deal,\"input\":function($event){if($event.target.composing)return;_vm.newTweetDescription=$event.target.value}}}),_c('div',{staticClass:\"textContent-span-wrapper\"},[_c('span',{staticClass:\"textContent-span textContent-span-warning textContent-span-hidden\"},[_vm._v(\"字數已達上限!\")]),_c('span',{staticClass:\"textContent-span textContent-span-hidden\"}),_c('button',{staticClass:\"btn btn-orange btn-new-tweet\",attrs:{\"type\":\"button\",\"data-bs-dismiss\":\"modal\",\"disabled\":_vm.isProcessing},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.handleSubmit.apply(null, arguments)}}},[_vm._v(\"推文\")])])])])])])])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"modal-header\"},[_c('img',{attrs:{\"src\":require(\"../assets/icon-close.png\"),\"alt\":\"\",\"type\":\"button\",\"data-bs-dismiss\":\"modal\",\"aria-label\":\"Close\"}})])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"modal fade\" v-bind:id=\"'modalNewTweet'\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\"\r\n    aria-hidden=\"true\">\r\n    <div class=\"modal-dialog\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <img src=\"../assets/icon-close.png\" alt=\"\" type=\"button\" data-bs-dismiss=\"modal\" aria-label=\"Close\">\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"modal-new-tweet-wrapper\">\r\n            <div class=\"modal-new-tweet-wrapper-left\">\r\n              <router-link class=\"link\" v-bind:to=\"'/users/' + currentUser.id\">\r\n                <img v-bind:src=\"currentUser.avatar\" alt=\"\" type=\"button\" data-bs-dismiss=\"modal\" aria-label=\"Close\">\r\n              </router-link>\r\n            </div>\r\n            <form class=\"modal-new-tweet-wrapper-right\">\r\n              <textarea cols=\"30\" rows=\"5\" maxlength=\"140\" placeholder=\"有什麼新鮮事？\" v-model=\"newTweetDescription\"\r\n                name=\"newTweetDescription\" v-on:keyup='words_deal' required></textarea>\r\n              <div class=\"textContent-span-wrapper\">\r\n                <span class=\"textContent-span textContent-span-warning textContent-span-hidden\">字數已達上限!</span>\r\n                <span class=\"textContent-span textContent-span-hidden\"></span>\r\n                <button type=\"button\" class=\"btn btn-orange btn-new-tweet\" data-bs-dismiss=\"modal\"\r\n                  @click.prevent.stop=\"handleSubmit\" v-bind:disabled=\"isProcessing\">推文</button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport tweetsAPI from '../api/tweets'\r\nimport { Toast } from '../utils/helpers'\r\n\r\nexport default {\r\n  props: {\r\n    currentUser: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      isProcessing: false,\r\n      newTweetDescription: '',\r\n    }\r\n  },\r\n  methods: {\r\n    async handleSubmit(event) {\r\n      try {\r\n        if (!this.newTweetDescription.trim()) {\r\n          Toast.fire({\r\n            icon: 'warning',\r\n            title: '推文內容不可為空白'\r\n          })\r\n          return\r\n        }\r\n        // 避免使用者移除 textarea 的 maxlength=\"140\" 屬性\r\n        if (this.newTweetDescription.length > 140) {\r\n          this.newTweetDescription = this.newTweetDescription.slice(0, 140)\r\n        }\r\n        this.isProcessing = true\r\n        const formData = {\r\n          userId: this.currentUser.id,\r\n          description: this.newTweetDescription,\r\n        }\r\n        const { data } = await tweetsAPI.postTweet({ formData })\r\n        if (data.status !== 'success') {\r\n          throw new Error(data.message)\r\n        }\r\n        this.$emit('after-post-new-tweet', {\r\n          ...formData,\r\n          tweetId: data.tweetId,\r\n        })\r\n        this.newTweetDescription = ''\r\n        // 送出後，清除字數上限提示\r\n        event.target.parentElement.children[0].classList.add('textContent-span-hidden')\r\n        event.target.parentElement.children[1].classList.add('textContent-span-hidden')\r\n        this.isProcessing = false\r\n      } catch (error) {\r\n        console.warn(error)\r\n      }\r\n    },\r\n    words_deal(event) {\r\n      const maxlength = event.target.attributes.maxlength.value\r\n      const textlength = event.target.value.length\r\n\r\n      // 可輸入的字數剩餘 20 字以內時\r\n      if (maxlength - textlength <= 20) {\r\n        // 顯示\"目前字數/字數上限\" 如 120/140\r\n        event.target.parentElement.children[1].children[1].classList.remove('textContent-span-hidden')\r\n        event.target.parentElement.children[1].children[1].textContent = `${textlength}/${maxlength}`\r\n\r\n        // 目前字數>=字數上限時，顯示\"字數已達上限\"的提示\r\n        if (textlength >= maxlength) {\r\n          event.target.parentElement.children[1].children[0].classList.remove('textContent-span-hidden')\r\n        } else {\r\n          event.target.parentElement.children[1].children[0].classList.add('textContent-span-hidden')\r\n        }\r\n      } else {\r\n        event.target.parentElement.children[1].children[0].classList.add('textContent-span-hidden')\r\n        event.target.parentElement.children[1].children[1].classList.add('textContent-span-hidden')\r\n      }\r\n      return\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.modal-new-tweet-wrapper {\r\n  display: flex;\r\n  padding: 15px;\r\n}\r\n\r\n.modal-new-tweet-wrapper-left img {\r\n  width: 50px;\r\n  height: 50px;\r\n  border-radius: 50%;\r\n  object-fit: cover;\r\n}\r\n\r\n.modal-new-tweet-wrapper-right {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-end;\r\n  width: 100%;\r\n  margin: 0px;\r\n  margin-left: 10px;\r\n  padding: 0px;\r\n}\r\n\r\n.modal-new-tweet-wrapper-right textarea {\r\n  width: 100%;\r\n  margin: 0px;\r\n  padding: 0px;\r\n  border: none;\r\n  font-weight: 500;\r\n  font-size: 18px;\r\n  line-height: 26px;\r\n  resize: none;\r\n}\r\n\r\n.modal-new-tweet-wrapper-right textarea::placeholder {\r\n  color: #9197A3;\r\n}\r\n\r\n.modal-new-tweet-wrapper-right textarea:focus,\r\n.modal-new-tweet-wrapper-right textarea:focus-visible {\r\n  width: 100%;\r\n  margin: 0px;\r\n  padding: 0px;\r\n  border: none;\r\n  outline: none;\r\n}\r\n\r\n.modal-new-tweet-wrapper-right .btn-new-tweet {\r\n  width: 66px;\r\n  height: 38px;\r\n  border-radius: 100px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ModalNewTweet.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ModalNewTweet.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ModalNewTweet.vue?vue&type=template&id=61c2da74&\"\nimport script from \"./ModalNewTweet.vue?vue&type=script&lang=js&\"\nexport * from \"./ModalNewTweet.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ModalNewTweet.vue?vue&type=style&index=0&id=61c2da74&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"modal fade\",attrs:{\"id\":'modal' + _vm.tweet.id,\"tabindex\":\"-1\",\"aria-labelledby\":\"exampleModalLabel\",\"aria-hidden\":\"true\"}},[_c('div',{staticClass:\"modal-dialog\"},[_c('div',{staticClass:\"modal-content\"},[_vm._m(0),_c('div',{staticClass:\"modal-body\"},[_c('div',{staticClass:\"modal-tweet-wrapper\"},[_c('div',{staticClass:\"modal-tweet-wrapper-left\"},[_c('router-link',{staticClass:\"link\",attrs:{\"to\":'/users/' + _vm.tweet.User.id}},[_c('img',{attrs:{\"src\":_vm.tweet.User.avatar,\"alt\":\"\",\"type\":\"button\",\"data-bs-dismiss\":\"modal\",\"aria-label\":\"Close\"}})]),_c('span')],1),_c('div',{staticClass:\"modal-tweet-wrapper-right\"},[_c('div',{staticClass:\"modal-tweet-info\"},[_c('router-link',{staticClass:\"link\",attrs:{\"to\":'/users/' + _vm.tweet.User.id}},[_c('div',{staticClass:\"modal-tweet-info-name\",attrs:{\"type\":\"button\",\"data-bs-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[_vm._v(\" \"+_vm._s(_vm.tweet.User.name))])]),_c('router-link',{staticClass:\"link\",attrs:{\"to\":'/users/' + _vm.tweet.User.id}},[_c('div',{staticClass:\"modal-tweet-info-account\",attrs:{\"type\":\"button\",\"data-bs-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[_vm._v(\" @\"+_vm._s(_vm.tweet.User.account)+\" \")])]),_c('div',{staticClass:\"modal-tweet-info-data\"},[_vm._v(\"・\"+_vm._s(_vm._f(\"fromNow\")(_vm.tweet.createdAt)))])],1),_c('div',{staticClass:\"modal-tweet-description\"},[_vm._v(\" \"+_vm._s(_vm.tweet.description)+\" \")]),_c('div',{staticClass:\"modal-reply-to\"},[_vm._v(\" 回覆給 \"),_c('router-link',{staticClass:\"link\",attrs:{\"to\":'/users/' + _vm.tweet.User.id}},[_c('p',{attrs:{\"type\":\"button\",\"data-bs-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[_vm._v(\"@\"+_vm._s(_vm.tweet.User.account))])])],1)])]),_c('div',{staticClass:\"modal-tweet-reply-wrapper\"},[_c('div',{staticClass:\"modal-tweet-reply-wrapper-left\"},[_c('router-link',{staticClass:\"link\",attrs:{\"to\":'/users/' + _vm.currentUser.id}},[_c('img',{attrs:{\"src\":_vm.currentUser.avatar,\"alt\":\"\",\"type\":\"button\",\"data-bs-dismiss\":\"modal\",\"aria-label\":\"Close\"}})])],1),_c('form',{staticClass:\"modal-tweet-reply-wrapper-right\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newTweetReply),expression:\"newTweetReply\"}],attrs:{\"tweetId\":_vm.tweet.id,\"cols\":\"30\",\"rows\":\"5\",\"placeholder\":\"推你的回覆\",\"maxlength\":\"140\",\"name\":\"newTweetReply\",\"required\":\"\"},domProps:{\"value\":(_vm.newTweetReply)},on:{\"keyup\":_vm.words_deal,\"input\":function($event){if($event.target.composing)return;_vm.newTweetReply=$event.target.value}}})])])]),_c('div',{staticClass:\"modal-footer\"},[_c('div',{staticClass:\"textContent-span-wrapper\",attrs:{\"id\":'textContent-span-wrapper' + _vm.tweet.id}},[_c('span',{staticClass:\"textContent-span textContent-span-warning textContent-span-hidden\"},[_vm._v(\"字數已達上限!\")]),_c('span',{staticClass:\"textContent-span textContent-span-hidden\"}),_c('button',{staticClass:\"btn btn-orange btn-new-tweet\",attrs:{\"type\":\"button\",\"data-bs-dismiss\":\"modal\",\"disabled\":_vm.isProcessing},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.handleSubmit(_vm.tweet.id, $event)}}},[_vm._v(\"回覆\")])])])])])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"modal-header\"},[_c('img',{attrs:{\"src\":require(\"../assets/icon-close.png\"),\"alt\":\"\",\"type\":\"button\",\"data-bs-dismiss\":\"modal\",\"aria-label\":\"Close\"}})])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"modal fade\" v-bind:id=\"'modal' + tweet.id\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\"\r\n    aria-hidden=\"true\">\r\n    <div class=\"modal-dialog\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <img src=\"../assets/icon-close.png\" alt=\"\" type=\"button\" data-bs-dismiss=\"modal\" aria-label=\"Close\">\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"modal-tweet-wrapper\">\r\n            <div class=\"modal-tweet-wrapper-left\">\r\n              <router-link class=\"link\" v-bind:to=\"'/users/' + tweet.User.id\">\r\n                <img v-bind:src=\"tweet.User.avatar\" alt=\"\" type=\"button\" data-bs-dismiss=\"modal\" aria-label=\"Close\">\r\n              </router-link>\r\n              <span></span>\r\n            </div>\r\n            <div class=\"modal-tweet-wrapper-right\">\r\n              <div class=\"modal-tweet-info\">\r\n                <router-link class=\"link\" v-bind:to=\"'/users/' + tweet.User.id\">\r\n                  <div class=\"modal-tweet-info-name\" type=\"button\" data-bs-dismiss=\"modal\" aria-label=\"Close\">\r\n                    {{ tweet.User.name }}</div>\r\n                </router-link>\r\n                <router-link class=\"link\" v-bind:to=\"'/users/' + tweet.User.id\">\r\n                  <div class=\"modal-tweet-info-account\" type=\"button\" data-bs-dismiss=\"modal\" aria-label=\"Close\">\r\n                    @{{ tweet.User.account }} </div>\r\n                </router-link>\r\n                <div class=\"modal-tweet-info-data\">・{{ tweet.createdAt | fromNow }}</div>\r\n              </div>\r\n              <div class=\"modal-tweet-description\">\r\n                {{ tweet.description }}\r\n              </div>\r\n              <div class=\"modal-reply-to\">\r\n                回覆給\r\n                <router-link class=\"link\" v-bind:to=\"'/users/' + tweet.User.id\">\r\n                  <p type=\"button\" data-bs-dismiss=\"modal\" aria-label=\"Close\">@{{ tweet.User.account }}</p>\r\n                </router-link>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"modal-tweet-reply-wrapper\">\r\n            <div class=\"modal-tweet-reply-wrapper-left\">\r\n              <router-link class=\"link\" v-bind:to=\"'/users/' + currentUser.id\">\r\n                <img v-bind:src=\"currentUser.avatar\" alt=\"\" type=\"button\" data-bs-dismiss=\"modal\" aria-label=\"Close\">\r\n              </router-link>\r\n            </div>\r\n            <form class=\"modal-tweet-reply-wrapper-right\">\r\n              <textarea v-bind:tweetId=\"tweet.id\" cols=\"30\" rows=\"5\" placeholder=\"推你的回覆\" maxlength=\"140\"\r\n                v-model=\"newTweetReply\" name=\"newTweetReply\" v-on:keyup='words_deal' required></textarea>\r\n            </form>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <div v-bind:id=\"'textContent-span-wrapper' + tweet.id\" class=\"textContent-span-wrapper\">\r\n            <span class=\"textContent-span textContent-span-warning textContent-span-hidden\">字數已達上限!</span>\r\n            <span class=\"textContent-span textContent-span-hidden\"></span>\r\n            <button type=\"button\" class=\"btn btn-orange btn-new-tweet\" data-bs-dismiss=\"modal\"\r\n              v-bind:disabled=\"isProcessing\" @click.prevent.stop=\"handleSubmit(tweet.id, $event)\">回覆</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport tweetsAPI from '../api/tweets'\r\nimport { fromNowFilter } from '../utils/mixins'\r\nimport { Toast } from '../utils/helpers'\r\n\r\nexport default {\r\n  props: {\r\n    tweet: {\r\n      type: Object\r\n    },\r\n    currentUser: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      newTweetReply: '',\r\n      isProcessing: false\r\n    }\r\n  },\r\n  methods: {\r\n    async handleSubmit(tweetId, event) {\r\n      try {\r\n        if (this.newTweetReply.trim() === '') {\r\n          Toast.fire({\r\n            icon: 'warning',\r\n            title: '回覆內容不可為空白'\r\n          })\r\n          return\r\n        }\r\n        // 避免使用者移除 textarea 的 maxlength=\"140\" 屬性\r\n        if (this.newTweetReply.length > 140) {\r\n          this.newTweetReply = this.newTweetReply.slice(0, 140)\r\n        }\r\n        this.isProcessing = true\r\n        const formData = {\r\n          userId: this.currentUser.id,\r\n          comment: this.newTweetReply,\r\n        }\r\n        const { data } = await tweetsAPI.postTweetReply({ formData, tweetId })\r\n        this.$emit('after-post-tweet-reply', {\r\n          ...data,\r\n          Tweet: {\r\n            ...this.tweet,\r\n          }\r\n        })\r\n        this.newTweetReply = ''\r\n        // 送出後，清除字數上限提示\r\n        event.target.parentElement.children[0].classList.add('textContent-span-hidden')\r\n        event.target.parentElement.children[1].classList.add('textContent-span-hidden')\r\n        this.isProcessing = false\r\n      } catch (error) {\r\n        this.isProcessing = false\r\n        console.warn(error)\r\n      }\r\n    },\r\n    words_deal(event) {\r\n      const maxlength = event.target.attributes.maxlength.value\r\n      const textlength = event.target.value.length\r\n      const textContentSpanWrapper = document.querySelector(`#textContent-span-wrapper${Number(event.target.attributes.tweetid.value)}`)\r\n\r\n      // 可輸入的字數剩餘 20 字以內時\r\n      if (maxlength - textlength <= 20) {\r\n        // 顯示\"目前字數/字數上限\" 如 120/140\r\n        textContentSpanWrapper.children[1].classList.remove('textContent-span-hidden')\r\n        textContentSpanWrapper.children[1].textContent = `${textlength}/${maxlength}`\r\n\r\n        // 目前字數>=字數上限時，顯示\"字數已達上限\"的提示\r\n        if (textlength >= maxlength) {\r\n          textContentSpanWrapper.children[0].classList.remove('textContent-span-hidden')\r\n        } else {\r\n          textContentSpanWrapper.children[0].classList.add('textContent-span-hidden')\r\n        }\r\n      } else {\r\n        textContentSpanWrapper.children[0].classList.add('textContent-span-hidden')\r\n        textContentSpanWrapper.children[1].classList.add('textContent-span-hidden')\r\n      }\r\n      return\r\n    }\r\n  },\r\n  mixins: [fromNowFilter]\r\n}\r\n</script>\r\n\r\n<style>\r\n.modal-header img {\r\n  width: 24px;\r\n  height: 24px;\r\n}\r\n\r\n.modal-body {\r\n  margin: 0px;\r\n  padding: 0px;\r\n}\r\n\r\n.modal-tweet-wrapper {\r\n  display: flex;\r\n  padding: 15px;\r\n}\r\n\r\n.modal-tweet-wrapper-left img {\r\n  width: 50px;\r\n  height: 50px;\r\n  object-fit: cover;\r\n  border-radius: 50%;\r\n}\r\n\r\n.modal-tweet-wrapper-left span {\r\n  display: block;\r\n  width: 2px;\r\n  height: calc(100% - 30px);\r\n  margin: 5px auto 0px;\r\n  background: #CCD6DD;\r\n}\r\n\r\n.modal-tweet-wrapper-right {\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-left: 10px;\r\n}\r\n\r\n.modal-tweet-info {\r\n  display: flex;\r\n}\r\n\r\n.modal-tweet-info :nth-child(1) {\r\n  margin-right: 5px;\r\n}\r\n\r\n.modal-tweet-info-name {\r\n  font-weight: 700;\r\n  font-size: 15px;\r\n  line-height: 22px;\r\n  color: #1C1C1C;\r\n}\r\n\r\n.modal-tweet-info-account,\r\n.modal-tweet-info-data {\r\n  font-weight: 500;\r\n  font-size: 15px;\r\n  line-height: 22px;\r\n  color: #657786;\r\n}\r\n\r\n.modal-tweet-description {\r\n  margin-top: 6px;\r\n  font-weight: 500;\r\n  font-size: 15px;\r\n  line-height: 22px;\r\n  color: #1C1C1C;\r\n  word-break: break-all\r\n}\r\n\r\n.modal-reply-to {\r\n  display: flex;\r\n  margin-top: 20px;\r\n  font-weight: 500;\r\n  font-size: 15px;\r\n  line-height: 22px;\r\n  color: #657786;\r\n}\r\n\r\n.modal-reply-to p {\r\n  margin: 0px;\r\n  margin-left: 2px;\r\n  color: #FF6600;\r\n}\r\n\r\n.modal-tweet-reply-wrapper {\r\n  display: flex;\r\n  padding: 15px;\r\n}\r\n\r\n.modal-tweet-reply-wrapper-left img {\r\n  width: 50px;\r\n  height: 50px;\r\n  object-fit: cover;\r\n  border-radius: 50%;\r\n}\r\n\r\n.modal-tweet-reply-wrapper-right {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-end;\r\n  width: 100%;\r\n  margin: 0px;\r\n  margin-left: 10px;\r\n  padding: 0px;\r\n}\r\n\r\n.modal-tweet-reply-wrapper-right input::placeholder {\r\n  color: #9197A3;\r\n}\r\n\r\n.modal-tweet-reply-wrapper-right textarea {\r\n  width: 100%;\r\n  margin: 0px;\r\n  padding: 0px;\r\n  border: none;\r\n  font-weight: 500;\r\n  font-size: 18px;\r\n  line-height: 26px;\r\n  resize: none;\r\n}\r\n\r\n.modal-tweet-reply-wrapper-right textarea:focus,\r\n.modal-tweet-reply-wrapper-right textarea:focus-visible {\r\n  width: 100%;\r\n  margin: 0px;\r\n  padding: 0px;\r\n  border: none;\r\n  outline: none;\r\n}\r\n\r\n.modal-footer {\r\n  border: none;\r\n}\r\n\r\n.modal-footer .btn-new-tweet {\r\n  width: 66px;\r\n  height: 38px;\r\n  border-radius: 100px;\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ModalTweetReply.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ModalTweetReply.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ModalTweetReply.vue?vue&type=template&id=4f7657de&\"\nimport script from \"./ModalTweetReply.vue?vue&type=script&lang=js&\"\nexport * from \"./ModalTweetReply.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ModalTweetReply.vue?vue&type=style&index=0&id=4f7657de&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","_m","currentUser","id","avatar","directives","name","rawName","value","newTweetDescription","expression","domProps","on","words_deal","$event","target","composing","_v","isProcessing","preventDefault","stopPropagation","handleSubmit","apply","arguments","staticRenderFns","require","props","type","required","data","methods","Toast","icon","title","userId","description","formData","tweetId","event","console","component","tweet","User","_s","account","_f","createdAt","newTweetReply","comment","Tweet","textContentSpanWrapper","mixins"],"sourceRoot":""}