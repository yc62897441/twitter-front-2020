{"version":3,"file":"js/108.4cf24e19.js","mappings":"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","sources":["webpack://twitter-front-2020/./src/components/RepliesSection.vue","webpack://twitter-front-2020/src/components/RepliesSection.vue","webpack://twitter-front-2020/./src/components/RepliesSection.vue?211a","webpack://twitter-front-2020/./src/components/RepliesSection.vue?22af","webpack://twitter-front-2020/./src/views/Tweet.vue","webpack://twitter-front-2020/./src/components/TweetSection.vue","webpack://twitter-front-2020/src/components/TweetSection.vue","webpack://twitter-front-2020/./src/components/TweetSection.vue?dc18","webpack://twitter-front-2020/./src/components/TweetSection.vue?f21d","webpack://twitter-front-2020/src/views/Tweet.vue","webpack://twitter-front-2020/./src/views/Tweet.vue?ed1b","webpack://twitter-front-2020/./src/views/Tweet.vue?3914"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.loadMore),expression:\"loadMore\"}],attrs:{\"infinite-scroll-disabled\":\"busy\"}},_vm._l((_vm.replies),function(reply){return _c('div',{key:'reply' + reply.id,staticClass:\"reply-wrapper\"},[_c('div',{staticClass:\"reply-wrapper-left\"},[_c('router-link',{staticClass:\"link\",attrs:{\"to\":'/users/' + reply.User.id}},[_c('img',{attrs:{\"src\":reply.User.avatar,\"alt\":\"\"}})])],1),_c('div',{staticClass:\"reply-wrapper-right\"},[_c('div',{staticClass:\"reply-info\"},[_c('router-link',{staticClass:\"link\",attrs:{\"to\":'/users/' + reply.User.id}},[_c('div',{staticClass:\"reply-info-name\"},[_vm._v(\" \"+_vm._s(reply.User.name)+\" \")])]),_c('router-link',{staticClass:\"link\",attrs:{\"to\":'/users/' + reply.User.id}},[_c('div',{staticClass:\"reply-info-account\"},[_vm._v(\"@\"+_vm._s(reply.User.account)+\" \")])]),_c('div',{staticClass:\"reply-info-data\"},[_vm._v(\"・\"+_vm._s(_vm._f(\"fromNow\")(reply.createdAt)))])],1),_c('div',{staticClass:\"reply-to\"},[_vm._v(\" 回覆給 \"),_c('router-link',{staticClass:\"link\",attrs:{\"to\":'/users/' + reply.Tweet.User.id}},[_c('p',[_vm._v(\"@\"+_vm._s(reply.Tweet.User.account))])])],1),_c('router-link',{staticClass:\"link\",attrs:{\"to\":'/tweets/' + reply.Tweet.id}},[_c('div',{staticClass:\"reply-description\"},[_vm._v(\" \"+_vm._s(reply.comment)+\" \")])])],1)])}),0)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div v-infinite-scroll=\"loadMore\" infinite-scroll-disabled=\"busy\">\r\n    <div v-for=\"reply in replies\" v-bind:key=\"'reply' + reply.id\" class=\"reply-wrapper\">\r\n      <div class=\"reply-wrapper-left\">\r\n        <router-link class=\"link\" v-bind:to=\"'/users/' + reply.User.id\">\r\n          <img v-bind:src=\"reply.User.avatar\" alt=\"\">\r\n        </router-link>\r\n      </div>\r\n      <div class=\"reply-wrapper-right\">\r\n        <div class=\"reply-info\">\r\n          <router-link class=\"link\" v-bind:to=\"'/users/' + reply.User.id\">\r\n            <div class=\"reply-info-name\"> {{ reply.User.name }} </div>\r\n          </router-link>\r\n          <router-link class=\"link\" v-bind:to=\"'/users/' + reply.User.id\">\r\n            <div class=\"reply-info-account\">@{{ reply.User.account }} </div>\r\n          </router-link>\r\n          <div class=\"reply-info-data\">・{{ reply.createdAt | fromNow }}</div>\r\n        </div>\r\n        <div class=\"reply-to\">\r\n          回覆給\r\n          <router-link class=\"link\" v-bind:to=\"'/users/' + reply.Tweet.User.id\">\r\n            <p>@{{ reply.Tweet.User.account }}</p>\r\n          </router-link>\r\n        </div>\r\n        <router-link class=\"link\" v-bind:to=\"'/tweets/' + reply.Tweet.id\">\r\n          <div class=\"reply-description\">\r\n            {{ reply.comment }}\r\n          </div>\r\n        </router-link>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { fromNowFilter } from '../utils/mixins'\r\n\r\nexport default {\r\n  props: {\r\n    replies: {\r\n      type: Array,\r\n    },\r\n    loadMoreTrigger: {\r\n      type: String\r\n    },\r\n    loadToEnd: {\r\n      type: Boolean\r\n    }\r\n  },\r\n  methods: {\r\n    loadMore() {\r\n      if (this.loadMoreTrigger !== 'replies' || this.loadToEnd === true) {\r\n        return\r\n      }\r\n      this.busy = true\r\n      // 設定至少 1.5 秒後才可以再 trigger 一次\r\n      this.$emit('load-more', {\r\n        'from': 'repliesSection'\r\n      })\r\n      setTimeout(() => {\r\n        this.busy = false\r\n      }, 1500)\r\n    }\r\n  },\r\n  mixins: [fromNowFilter]\r\n}\r\n</script>\r\n\r\n<style>\r\n.reply-wrapper {\r\n  display: flex;\r\n  padding: 15px;\r\n  border-bottom: 1px solid #E6ECF0;\r\n}\r\n\r\n.reply-wrapper-left img {\r\n  width: 50px;\r\n  height: 50px;\r\n  object-fit: cover;\r\n  border-radius: 50%;\r\n}\r\n\r\n.reply-wrapper-right {\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-left: 10px;\r\n}\r\n\r\n.reply-info {\r\n  display: flex;\r\n}\r\n\r\n.reply-info-name {\r\n  margin-right: 5px;\r\n  font-weight: 700;\r\n  font-size: 15px;\r\n  line-height: 22px;\r\n  color: #1C1C1C;\r\n}\r\n\r\n.reply-info-account,\r\n.reply-info-data {\r\n  font-weight: 500;\r\n  font-size: 15px;\r\n  line-height: 22px;\r\n  color: #657786;\r\n}\r\n\r\n.reply-to {\r\n  display: flex;\r\n  margin-top: 4px;\r\n  font-weight: 500;\r\n  font-size: 15px;\r\n  line-height: 22px;\r\n  color: #657786;\r\n}\r\n\r\n.reply-to p {\r\n  margin: 0px;\r\n  margin-left: 2px;\r\n  color: #FF6600;\r\n}\r\n\r\n.reply-description {\r\n  margin-top: 6px;\r\n  font-weight: 400;\r\n  font-size: 15px;\r\n  line-height: 22px;\r\n  color: #1C1C1C;\r\n  word-break: break-all\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RepliesSection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RepliesSection.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RepliesSection.vue?vue&type=template&id=7ebc799f&\"\nimport script from \"./RepliesSection.vue?vue&type=script&lang=js&\"\nexport * from \"./RepliesSection.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RepliesSection.vue?vue&type=style&index=0&id=7ebc799f&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"left-container\"},[_c('Navbar',{staticClass:\"Navbar\",attrs:{\"currentUser\":_vm.currentUser}})],1),_c('div',{staticClass:\"middle-container\"},[_c('div',{staticClass:\"middle-container-wrapper\"},[_c('div',{staticClass:\"middle-container-arrow-wrapper\"},[_c('img',{attrs:{\"src\":require(\"../assets/arrow-left.png\"),\"type\":\"button\",\"alt\":\"\"},on:{\"click\":_vm.hasHistory}})]),_vm._m(0)]),_c('TweetSection',{attrs:{\"propsTweet\":_vm.tweet},on:{\"after-post-tweet-reply\":_vm.afterPostTweetReply}}),_c('RepliesSection',{attrs:{\"replies\":_vm.replies}}),_c('ModalNewTweet',{attrs:{\"currentUser\":_vm.currentUser}})],1),_c('div',{staticClass:\"right-container\"},[_c('FollowingsBar',{staticClass:\"FollowingsBar\",attrs:{\"currentUser\":_vm.currentUser}})],1)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"middle-container-page-title-wrapper\"},[_c('h1',[_vm._v(\"推文\")])])\n}]\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"tweet-wrapper\"}},[_c('div',{staticClass:\"tweet-user-info-layer\"},[_c('div',[_c('router-link',{staticClass:\"link\",attrs:{\"to\":'/users/' + _vm.tweet.User.id}},[_c('img',{attrs:{\"src\":_vm.tweet.User.avatar,\"alt\":\"\"}})])],1),_c('div',{staticClass:\"tweet-user-info-wrapper\"},[_c('router-link',{staticClass:\"link\",attrs:{\"to\":'/users/' + _vm.tweet.User.id}},[_c('div',{staticClass:\"tweet-user-info-name\"},[_vm._v(_vm._s(_vm.tweet.User.name))])]),_c('router-link',{staticClass:\"link\",attrs:{\"to\":'/users/' + _vm.tweet.User.id}},[_c('div',{staticClass:\"tweet-user-info-account\"},[_vm._v(\"@\"+_vm._s(_vm.tweet.User.account))])])],1)]),_c('div',{staticClass:\"tweet-description-layer\"},[_vm._v(\" \"+_vm._s(_vm.tweet.description)+\" \")]),_c('div',{staticClass:\"tweet-date-layer\"},[_vm._v(\" \"+_vm._s(_vm._f(\"formatTime\")(_vm.tweet.createdAt))+\" \")]),_c('div',{staticClass:\"tweet-interaction-layer\"},[_c('div',[_vm._v(_vm._s(_vm.tweet.repliesLength)),_c('p',[_vm._v(\"回覆\")])]),_c('div',[_vm._v(_vm._s(_vm.tweet.likesLength)),_c('p',[_vm._v(\"喜歡次數\")])])]),_c('div',{staticClass:\"tweet-interaction-icons-layer\"},[_c('img',{attrs:{\"src\":require(\"../assets/icon-reply.png\"),\"alt\":\"\",\"type\":\"button\",\"data-bs-toggle\":\"modal\",\"data-bs-target\":'#modal' + _vm.tweet.id}}),(_vm.currentUser.userLikesId.includes(_vm.tweet.id))?_c('img',{attrs:{\"src\":require(\"../assets/icon-isLiked.png\"),\"type\":\"button\",\"alt\":\"\"},on:{\"click\":function($event){return _vm.unlikeTweet(_vm.tweet.id)}}}):_c('img',{attrs:{\"src\":require(\"../assets/icon-like.png\"),\"type\":\"button\",\"alt\":\"\"},on:{\"click\":function($event){return _vm.likeTweet(_vm.tweet.id)}}})]),_c('ModalTweetReply',{attrs:{\"tweet\":_vm.tweet,\"currentUser\":_vm.currentUser},on:{\"after-post-tweet-reply\":_vm.afterPostTweetReply}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"tweet-wrapper\">\r\n    <div class=\"tweet-user-info-layer\">\r\n      <div>\r\n        <router-link class=\"link\" v-bind:to=\"'/users/' + tweet.User.id\">\r\n          <img v-bind:src=\"tweet.User.avatar\" alt=\"\">\r\n        </router-link>\r\n      </div>\r\n      <div class=\"tweet-user-info-wrapper\">\r\n        <router-link class=\"link\" v-bind:to=\"'/users/' + tweet.User.id\">\r\n          <div class=\"tweet-user-info-name\">{{ tweet.User.name }}</div>\r\n        </router-link>\r\n        <router-link class=\"link\" v-bind:to=\"'/users/' + tweet.User.id\">\r\n          <div class=\"tweet-user-info-account\">@{{ tweet.User.account }}</div>\r\n        </router-link>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"tweet-description-layer\">\r\n      {{ tweet.description }}\r\n    </div>\r\n\r\n    <div class=\"tweet-date-layer\">\r\n      {{ tweet.createdAt | formatTime }}\r\n    </div>\r\n\r\n    <div class=\"tweet-interaction-layer\">\r\n      <div>{{ tweet.repliesLength }}<p>回覆</p>\r\n      </div>\r\n      <div>{{ tweet.likesLength }}<p>喜歡次數</p>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"tweet-interaction-icons-layer\">\r\n      <!-- trigger modal -->\r\n      <img src=\"../assets/icon-reply.png\" alt=\"\" type=\"button\" data-bs-toggle=\"modal\"\r\n        v-bind:data-bs-target=\"'#modal' + tweet.id\">\r\n      <img v-if=\"currentUser.userLikesId.includes(tweet.id)\" src=\"../assets/icon-isLiked.png\" type=\"button\" alt=\"\"\r\n        v-on:click=\"unlikeTweet(tweet.id)\">\r\n      <img v-else src=\"../assets/icon-like.png\" type=\"button\" alt=\"\" v-on:click=\"likeTweet(tweet.id)\">\r\n    </div>\r\n\r\n    <ModalTweetReply v-bind:tweet=\"tweet\" v-bind:currentUser=\"currentUser\"\r\n      v-on:after-post-tweet-reply=\"afterPostTweetReply\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ModalTweetReply from './ModalTweetReply.vue'\r\nimport tweetsAPI from '../api/tweets'\r\nimport { fromNowFilter } from '../utils/mixins'\r\nimport { mapState } from 'vuex'\r\n\r\nexport default {\r\n  components: {\r\n    ModalTweetReply\r\n  },\r\n  props: {\r\n    propsTweet: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      tweet: {},\r\n      newTweetReply: '',\r\n      isProcessing: false\r\n    }\r\n  },\r\n  methods: {\r\n    async handleSubmit(tweetId) {\r\n      try {\r\n        if (this.newTweetReply === '') {\r\n          return\r\n        }\r\n        this.isProcessing = true\r\n        const formData = {\r\n          userId: this.currentUser.id,\r\n          comment: this.newTweetReply,\r\n        }\r\n        const { data } = await tweetsAPI.postTweetReply({ formData, tweetId })\r\n        this.$emit('after-post-tweet-reply', {\r\n          ...data,\r\n        })\r\n        this.newTweetReply = ''\r\n        this.isProcessing = false\r\n      } catch (error) {\r\n        this.isProcessing = false\r\n        console.warn(error)\r\n      }\r\n    },\r\n    afterPostTweetReply(payload) {\r\n      const { TweetId } = payload\r\n      this.tweet.repliesLength += 1\r\n      this.$emit('after-post-tweet-reply', {\r\n        ...payload,\r\n      })\r\n    },\r\n    async likeTweet(tweetId) {\r\n      try {\r\n        this.isProcessing = true\r\n        const currentUserId = this.currentUserId\r\n        const { data } = await tweetsAPI.likeTweet({ tweetId })\r\n        if (data.status === 'success') {\r\n          this.currentUser.userLikesId.push(tweetId)\r\n          this.tweet.likesLength += 1\r\n        }\r\n        this.isProcessing = false\r\n      } catch (error) {\r\n        this.isProcessing = false\r\n        console.warn(error)\r\n      }\r\n    },\r\n    async unlikeTweet(tweetId) {\r\n      try {\r\n        this.isProcessing = true\r\n        const currentUserId = this.currentUserId\r\n        const { data } = await tweetsAPI.unlikeTweet({ tweetId })\r\n        if (data.status === 'success') {\r\n          this.currentUser.userLikesId = this.currentUser.userLikesId.map(userLikeId => {\r\n            if (userLikeId !== tweetId) {\r\n              return userLikeId\r\n            }\r\n          })\r\n          this.tweet.likesLength -= 1\r\n        }\r\n        this.isProcessing = false\r\n      } catch (error) {\r\n        this.isProcessing = false\r\n        console.warn(error)\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapState(['currentUser'])\r\n  },\r\n  watch: {\r\n    propsTweet(newValue) {\r\n      this.tweet = {\r\n        ...newValue,\r\n      }\r\n    }\r\n  },\r\n  mixins: [fromNowFilter]\r\n}\r\n</script>\r\n\r\n<style>\r\n#tweet-wrapper {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 15px;\r\n  border-top: 1px solid #E6ECF0;\r\n  border-bottom: 1px solid #E6ECF0;\r\n}\r\n\r\n.tweet-user-info-layer {\r\n  display: flex;\r\n  padding-bottom: 15px;\r\n}\r\n\r\n.tweet-user-info-layer img {\r\n  width: 50px;\r\n  height: 50px;\r\n  object-fit: cover;\r\n  border-radius: 50%;\r\n}\r\n\r\n.tweet-user-info-wrapper {\r\n  margin-left: 10px;\r\n}\r\n\r\n.tweet-user-info-name {\r\n  font-weight: 700;\r\n  font-size: 15px;\r\n  line-height: 22px;\r\n  color: #1C1C1C;\r\n}\r\n\r\n.tweet-user-info-account {\r\n  font-weight: 500;\r\n  font-size: 15px;\r\n  line-height: 22px;\r\n  color: #657786;\r\n}\r\n\r\n.tweet-description-layer {\r\n  margin-bottom: 15px;\r\n  font-weight: 500;\r\n  font-size: 23px;\r\n  line-height: 34px;\r\n  color: #1C1C1C;\r\n  word-break: break-all\r\n}\r\n\r\n.tweet-date-layer {\r\n  margin-bottom: 15px;\r\n  font-weight: 500;\r\n  font-size: 15px;\r\n  line-height: 22px;\r\n  color: #657786;\r\n}\r\n\r\n.tweet-interaction-layer {\r\n  display: flex;\r\n  padding: 20px 0px;\r\n  border-top: 1px solid #E6ECF0;\r\n  border-bottom: 1px solid #E6ECF0;\r\n  font-weight: 700;\r\n  font-size: 19px;\r\n  line-height: 28px;\r\n  color: #000000;\r\n}\r\n\r\n.tweet-interaction-layer div {\r\n  display: flex;\r\n  margin-right: 20px;\r\n}\r\n\r\n.tweet-interaction-layer p {\r\n  color: #657786;\r\n  margin: 0px;\r\n  margin-left: 5px;\r\n}\r\n\r\n.tweet-interaction-icons-layer {\r\n  padding: 15px 0px 0px;\r\n}\r\n\r\n.tweet-interaction-icons-layer img {\r\n  width: 25px;\r\n  height: 25px;\r\n  margin: 0px;\r\n  margin-right: 155px;\r\n  cursor: pointer;\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TweetSection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TweetSection.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TweetSection.vue?vue&type=template&id=3526d0d6&\"\nimport script from \"./TweetSection.vue?vue&type=script&lang=js&\"\nexport * from \"./TweetSection.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TweetSection.vue?vue&type=style&index=0&id=3526d0d6&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"container\">\r\n    <div class=\"left-container\">\r\n      <Navbar class=\"Navbar\" v-bind:currentUser=\"currentUser\" />\r\n    </div>\r\n\r\n    <div class=\"middle-container\">\r\n      <div class=\"middle-container-wrapper\">\r\n        <div class=\"middle-container-arrow-wrapper\">\r\n          <img src=\"../assets/arrow-left.png\" type=\"button\" v-on:click=\"hasHistory\" alt=\"\">\r\n        </div>\r\n        <div class=\"middle-container-page-title-wrapper\">\r\n          <h1>推文</h1>\r\n        </div>\r\n      </div>\r\n\r\n      <TweetSection v-bind:propsTweet=\"tweet\" v-on:after-post-tweet-reply=\"afterPostTweetReply\" />\r\n      <RepliesSection v-bind:replies=\"replies\" />\r\n      <ModalNewTweet v-bind:currentUser=\"currentUser\" />\r\n    </div>\r\n\r\n    <div class=\"right-container\">\r\n      <FollowingsBar class=\"FollowingsBar\" v-bind:currentUser=\"currentUser\" />\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Navbar from '../components/Navbar.vue'\r\nimport FollowingsBar from '../components/FollowingsBar.vue'\r\nimport TweetSection from '../components/TweetSection.vue'\r\nimport RepliesSection from '../components/RepliesSection.vue'\r\nimport ModalNewTweet from '../components/ModalNewTweet.vue'\r\nimport tweetsAPI from '../api/tweets'\r\nimport { mapState } from 'vuex'\r\nimport { v4 as uuidv4 } from 'uuid'\r\nimport { Toast } from '../utils/helpers'\r\n\r\nexport default {\r\n  components: {\r\n    Navbar,\r\n    FollowingsBar,\r\n    TweetSection,\r\n    RepliesSection,\r\n    ModalNewTweet\r\n  },\r\n  data() {\r\n    return {\r\n      tweet: {},\r\n      isProcessing: false,\r\n      replies: []\r\n    }\r\n  },\r\n  methods: {\r\n    async fetchTweet(tweetId) {\r\n      try {\r\n        const id = tweetId\r\n        const response = await tweetsAPI.getTweet({ id })\r\n        if (response.status !== 200) {\r\n          throw new Error()\r\n        }\r\n        const data = response.data\r\n        this.tweet = data\r\n      } catch (error) {\r\n         console.warn(error)\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '找不到該則 Tweet',\r\n          timer: 2000,\r\n        })\r\n        this.$router.push({ name: 'not-found' })\r\n        setTimeout(() => {\r\n          this.$router.go(-2)\r\n        }, 1000)\r\n      }\r\n    },\r\n    async getTweetReplies(tweetId) {\r\n      try {\r\n        const { data } = await tweetsAPI.getTweetReplies({ tweetId })\r\n        this.replies = data\r\n      } catch (error) {\r\n        console.warn(error)\r\n      }\r\n    },\r\n    afterPostTweetReply(payload) {\r\n      this.replies.unshift({\r\n        TweetId: payload.TweetId,\r\n        UserId: payload.UserId,\r\n        comment: payload.comment,\r\n        createdAt: payload.createdAt,\r\n        id: payload.id,\r\n        updatedAt: payload.updatedAt,\r\n        User: {\r\n          id: this.currentUser.id,\r\n          name: this.currentUser.name,\r\n          account: this.currentUser.account,\r\n          avatar: this.currentUser.avatar,\r\n        },\r\n        Tweet: {\r\n          User: {\r\n            account: this.tweet.User.account\r\n          }\r\n        }\r\n      })\r\n    },\r\n    hasHistory() {\r\n      this.$router.go(-1)\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapState(['currentUser'])\r\n  },\r\n  mounted() {\r\n    const tweetId = this.$route.params.id\r\n    this.fetchTweet(tweetId)\r\n    this.getTweetReplies(tweetId)\r\n  },\r\n  beforeRouteUpdate(to, from, next) {\r\n    const tweetId = to.params.id\r\n    this.fetchTweet(tweetId)\r\n    this.getTweetReplies(tweetId)\r\n    next()\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Tweet.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Tweet.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tweet.vue?vue&type=template&id=06257ff0&\"\nimport script from \"./Tweet.vue?vue&type=script&lang=js&\"\nexport * from \"./Tweet.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","directives","name","rawName","value","loadMore","expression","attrs","_l","replies","reply","key","id","staticClass","User","avatar","_v","_s","account","_f","createdAt","Tweet","comment","staticRenderFns","props","type","loadMoreTrigger","loadToEnd","methods","setTimeout","mixins","component","currentUser","require","on","hasHistory","_m","tweet","afterPostTweetReply","description","repliesLength","likesLength","userLikesId","includes","$event","unlikeTweet","likeTweet","components","ModalTweetReply","propsTweet","required","data","newTweetReply","isProcessing","userId","formData","tweetId","console","TweetId","computed","watch","Navbar","FollowingsBar","TweetSection","RepliesSection","ModalNewTweet","Toast","icon","title","timer","UserId","updatedAt","mounted","beforeRouteUpdate","next"],"sourceRoot":""}